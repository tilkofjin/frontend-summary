(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{382:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"å¼‚å¸¸è¿‡æ»¤å™¨ä»‹ç»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚å¸¸è¿‡æ»¤å™¨ä»‹ç»"}},[t._v("#")]),t._v(" å¼‚å¸¸è¿‡æ»¤å™¨ä»‹ç»")]),t._v(" "),a("p",[a("code",[t._v("Nest")]),t._v(" å¸¦æœ‰å†…ç½®çš„å¼‚å¸¸å±‚ï¼Œè¯¥å±‚è´Ÿè´£å¤„ç†åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰æœªå¤„ç†çš„å¼‚å¸¸ã€‚å½“åº”ç”¨ç¨‹åºä»£ç æœªå¤„ç†å¼‚å¸¸æ—¶ï¼Œæ­¤å±‚å°†æ•è·è¯¥å¼‚å¸¸ï¼Œç„¶åå¯¹ç”¨æˆ·è‡ªåŠ¨å‘é€é€‚å½“çš„å‹å¥½å“åº”ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://docs.nestjs.com/assets/Filter_1.png",alt:"img",title:"å¼‚å¸¸è¿‡æ»¤å™¨"}})]),t._v(" "),a("p",[t._v("å¼€ç®±å³ç”¨ï¼Œæ­¤æ“ä½œç”±å†…ç½®çš„å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨æ‰§è¡Œï¼Œè¯¥è¿‡æ»¤å™¨å¤„ç† "),a("code",[t._v("HttpException")]),t._v(" ç±»å‹çš„å¼‚å¸¸(åŠå…¶å­ç±»)ã€‚å¦‚æœæ— æ³•è¯†åˆ«å¼‚å¸¸(æ—¢ä¸æ˜¯ "),a("code",[t._v("HttpException")]),t._v(" ä¹Ÿä¸æ˜¯ä» "),a("code",[t._v("HttpException")]),t._v(" ç»§æ‰¿çš„ç±»)ï¼Œåˆ™å†…ç½®å¼‚å¸¸è¿‡æ»¤å™¨å°†ç”Ÿæˆä»¥ä¸‹é»˜è®¤JSONå“åº”ï¼š")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"statusCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Internal server error"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"åŸºæœ¬å¼‚å¸¸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬å¼‚å¸¸"}},[t._v("#")]),t._v(" åŸºæœ¬å¼‚å¸¸")]),t._v(" "),a("p",[a("code",[t._v("Nest")]),t._v(" æä¾›äº†å†…ç½®çš„ "),a("code",[t._v("HttpException")]),t._v(" ç±»ï¼Œè¯¥ç±»ä» "),a("code",[t._v("@nestjs/common")]),t._v(" åŒ…å¼•å…¥ï¼Œå¯¹äºå…¸å‹çš„åŸºäº "),a("code",[t._v("HTTP REST/GraphQL API")]),t._v("çš„åº”ç”¨ç¨‹åºï¼Œæœ€ä½³å®è·µæ˜¯åœ¨å‘ç”ŸæŸäº›é”™è¯¯æƒ…å†µæ—¶å‘é€æ ‡å‡† "),a("code",[t._v("HTTP")]),t._v(" å“åº”å¯¹è±¡ã€‚")]),t._v(" "),a("p",[t._v("ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ "),a("code",[t._v("CatsController")]),t._v(" ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª "),a("code",[t._v("findAll()")]),t._v(" æ–¹æ³• ( è·å–è·¯ç”±)ã€‚å‡è®¾æ­¤è·¯ç”±å¤„ç†ç¨‹åºç”±äºæŸç§åŸå› å¼•å‘äº†å¼‚å¸¸ï¼Œä¸ºäº†è¯´æ˜ï¼Œæˆ‘ä»¬å¯¹å…¶åšå¦‚ä¸‹ç¡¬ç¼–ç ï¼š")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("cats.controller.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[t._v("@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Forbidden'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HttpStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FORBIDDEN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨äº† "),a("code",[t._v("HttpStatus")]),t._v("ã€‚ è¿™æ˜¯ä» "),a("code",[t._v("@nestjs/common")]),t._v(" åŒ…å¯¼å…¥çš„å¸®åŠ©æšä¸¾ã€‚")])]),t._v(" "),a("p",[t._v("å½“å®¢æˆ·ç«¯è°ƒç”¨æ­¤ç«¯ç‚¹æ—¶ï¼Œå“åº”å¦‚ä¸‹æ‰€ç¤ºï¼š")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"statusCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Forbidden"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("HttpException")]),t._v(" æ„é€ å‡½æ•°é‡‡ç”¨ä¸¤ä¸ªå¿…éœ€çš„å‚æ•°æ¥ç¡®å®šå“åº”ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("response")]),t._v(" å‚æ•°å®šä¹‰ "),a("code",[t._v("JSON")]),t._v(" å“åº”ä¸»ä½“ã€‚å¯ä»¥æ˜¯ "),a("code",[t._v("string")]),t._v(" æˆ– "),a("code",[t._v("object")]),t._v(", å¦‚ä¸‹æ‰€è¿°ã€‚")]),t._v(" "),a("li",[a("code",[t._v("status")]),t._v(" å‚æ•°å®šä¹‰ "),a("code",[t._v("HTTP")]),t._v(" çŠ¶æ€ä»£ç ã€‚")])]),t._v(" "),a("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼ŒJSONå“åº”ä¸»ä½“åŒ…å«ä¸¤ä¸ªå±æ€§ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("statusCode")]),t._v("ï¼šé»˜è®¤ä¸º "),a("code",[t._v("status")]),t._v("å‚æ•°ä¸­æä¾›çš„ "),a("code",[t._v("HTTP")]),t._v(" çŠ¶æ€ç ã€‚")]),t._v(" "),a("li",[a("code",[t._v("message")]),t._v("ï¼šåŸºäºçŠ¶æ€çš„ "),a("code",[t._v("HTTP")]),t._v(" é”™è¯¯çš„ç®€çŸ­æè¿°ã€‚")])]),t._v(" "),a("p",[t._v("è¦ä»…è¦†ç›–"),a("strong",[t._v("JSON")]),t._v("å“åº”ä½“çš„æ¶ˆæ¯éƒ¨åˆ†ï¼Œè¯·åœ¨ "),a("code",[t._v("response")]),t._v(" å‚æ•°ä¸­æä¾›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¦è¦†ç›–æ•´ä¸ª "),a("code",[t._v("JSON")]),t._v(" å“åº”ä½“ï¼Œè¯·åœ¨ "),a("code",[t._v("response")]),t._v(" å‚æ•°ä¸­ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œ"),a("code",[t._v("Nest")]),t._v(" å°†åºåˆ—åŒ–è¯¥å¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸º "),a("code",[t._v("JSON")]),t._v(" å“åº”æ­£æ–‡è¿”å›ã€‚ç¬¬äºŒä¸ªæ„é€ å‡½æ•°å‚æ•°-"),a("code",[t._v("status")]),t._v("-åº”è¯¥æ˜¯æœ‰æ•ˆçš„ "),a("code",[t._v("HTTP")]),t._v(" çŠ¶æ€ç ã€‚æœ€ä½³å®è·µæ˜¯ä½¿ç”¨ä» "),a("code",[t._v("@nestjs/common")]),t._v(" å¯¼å…¥çš„ "),a("code",[t._v("HttpStatus")]),t._v(" æšä¸¾ã€‚")]),t._v(" "),a("p",[t._v("è¿™æ˜¯ä¸€ä¸ªè¦†ç›–æ•´ä¸ªå“åº”æ­£æ–‡çš„ç¤ºä¾‹ï¼š")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("cats.controller.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[t._v("@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    status"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" HttpStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FORBIDDEN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    error"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'This is a custom message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HttpStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FORBIDDEN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œåº”è¯¥çš„å“åº”æ˜¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is a custom message"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"è‡ªå®šä¹‰å¼‚å¸¸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰å¼‚å¸¸"}},[t._v("#")]),t._v(" è‡ªå®šä¹‰å¼‚å¸¸")]),t._v(" "),a("p",[t._v("å¤§å¤šæƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦å†™è‡ªå®šä¹‰å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„ "),a("code",[t._v("Nest HTTP")]),t._v(" å¼‚å¸¸ï¼Œå¦‚ä¸‹ä¸€èŠ‚æ‰€è¿°ï¼Œå¦‚æœä½ ç¡®å®éœ€è¦åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ï¼Œæœ€å¥½åˆ›å»ºè‡ªå·±çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œæ‚¨çš„è‡ªå®šä¹‰å¼‚å¸¸ç»§æ‰¿è‡ªåŸºæœ¬ "),a("code",[t._v("HttpException")]),t._v(" ç±»ã€‚ç”¨è¿™ç§æ–¹æ³•ï¼Œ"),a("code",[t._v("Nest")]),t._v(" ä¼šè¯†åˆ«æ‚¨çš„å¼‚å¸¸ï¼Œå¹¶è‡ªåŠ¨å¤„ç†é”™è¯¯å“åº”ï¼Œè®©æˆ‘ä»¬å®ç°ä¸€ä¸ªè¿™æ ·çš„å¼‚å¸¸:")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("forbidden.exception.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ForbiddenException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Forbidden'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HttpStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FORBIDDEN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ç”±äº "),a("code",[t._v("ForbiddenException")]),t._v(" æ‰©å±•äº†åŸºç¡€ "),a("code",[t._v("HttpException")]),t._v("ï¼Œå®ƒå°†ä¸å†…ç½®å¼‚å¸¸å¤„ç†ç¨‹åºæ— ç¼åä½œï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ "),a("code",[t._v("findAll()")]),t._v(" æ–¹æ³•ä¸­ä½¿ç”¨å®ƒã€‚")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("cats.controller.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[t._v("@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ForbiddenException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"å†…ç½®httpå¼‚å¸¸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å†…ç½®httpå¼‚å¸¸"}},[t._v("#")]),t._v(" å†…ç½®HTTPå¼‚å¸¸")]),t._v(" "),a("p",[a("code",[t._v("Nest")]),t._v(" æä¾›äº†ä¸€ç»„ä»åŸºæœ¬ "),a("code",[t._v("HttpException")]),t._v(" ç»§æ‰¿çš„åŸºæœ¬å¼‚å¸¸ï¼Œè¿™äº›æ˜¯ä» "),a("code",[t._v("@nestjs/common")]),t._v(" åŒ…å…¬å¼€çš„ï¼Œå®ƒä»¬ä»£è¡¨è®¸å¤šæœ€å¸¸è§çš„ "),a("code",[t._v("HTTP")]),t._v(" å¼‚å¸¸ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("BadRequestException")])]),t._v(" "),a("li",[a("code",[t._v("UnauthorizedException")])]),t._v(" "),a("li",[a("code",[t._v("NotFoundException")])]),t._v(" "),a("li",[a("code",[t._v("ForbiddenException")])]),t._v(" "),a("li",[a("code",[t._v("NotAcceptableException")])]),t._v(" "),a("li",[a("code",[t._v("RequestTimeoutException")])]),t._v(" "),a("li",[a("code",[t._v("ConflictException")])]),t._v(" "),a("li",[a("code",[t._v("GoneException")])]),t._v(" "),a("li",[a("code",[t._v("HttpVersionNotSupportedException")])]),t._v(" "),a("li",[a("code",[t._v("PayloadTooLargeException")])]),t._v(" "),a("li",[a("code",[t._v("UnsupportedMediaTypeException")])]),t._v(" "),a("li",[a("code",[t._v("UnprocessableEntityException")])]),t._v(" "),a("li",[a("code",[t._v("InternalServerErrorException")])]),t._v(" "),a("li",[a("code",[t._v("NotImplementedException")])]),t._v(" "),a("li",[a("code",[t._v("ImATeapotException")])]),t._v(" "),a("li",[a("code",[t._v("MethodNotAllowedException")])]),t._v(" "),a("li",[a("code",[t._v("BadGatewayException")])]),t._v(" "),a("li",[a("code",[t._v("ServiceUnavailableException")])]),t._v(" "),a("li",[a("code",[t._v("GatewayTimeoutException")])])]),t._v(" "),a("h2",{attrs:{id:"å¼‚å¸¸è¿‡æ»¤å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚å¸¸è¿‡æ»¤å™¨"}},[t._v("#")]),t._v(" å¼‚å¸¸è¿‡æ»¤å™¨")]),t._v(" "),a("p",[t._v("å†…ç½®çš„åŸºæœ¬å¼‚å¸¸è¿‡æ»¤å™¨å¯ä»¥ä¸ºæ‚¨è‡ªåŠ¨å¤„ç†è®¸å¤šæƒ…å†µï¼Œæ‚¨å¯èƒ½å¸Œæœ›å®Œå…¨æ§åˆ¶å¼‚å¸¸å±‚ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ‚¨å¯èƒ½éœ€è¦åŸºäºä¸€äº›åŠ¨æ€å› ç´ æ·»åŠ æ—¥å¿—è®°å½•ï¼Œæˆ–ä½¿ç”¨å…¶ä»– "),a("code",[t._v("JSON")]),t._v(" æ¨¡å¼ï¼Œ"),a("strong",[t._v("å¼‚å¸¸è¿‡æ»¤å™¨")]),t._v("æ­£æ˜¯ä¸ºæ­¤ç›®çš„è€Œè®¾è®¡çš„ã€‚å®ƒä»¬ä½¿æ‚¨å¯ä»¥ç²¾ç¡®çš„æ§åˆ¶æµä»¥åŠå°†å“åº”çš„å†…å®¹å‘é€å›å®¢æˆ·ç«¯ã€‚æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªå¼‚å¸¸è¿‡æ»¤å™¨ï¼Œè¯¥è¿‡æ»¤å™¨è´Ÿè´£æ•è·ä½œä¸º "),a("code",[t._v("HttpException")]),t._v(" ç±»å®ä¾‹çš„å¼‚å¸¸ã€‚å¹¶ä¸ºå…¶å®ç°è‡ªå®šä¹‰å“åº”é€»è¾‘ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è®¿é—®åŸºç¡€å¹³å°çš„ "),a("code",[t._v("Request")]),t._v(" å’Œ "),a("code",[t._v("Response")]),t._v(" å¯¹è±¡ã€‚æˆ‘ä»¬å°†è®¿é—® "),a("code",[t._v("Request")]),t._v("å¯¹è±¡ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æå–åŸå§‹ "),a("code",[t._v("url")]),t._v(" å¹¶å°†å…¶åŒ…å«åœ¨æ—¥å¿—è®°å½•ä¿¡æ¯ä¸­ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ "),a("code",[t._v("Response.json()")]),t._v(" æ–¹æ³•ï¼Œä½¿ç”¨ "),a("code",[t._v("Response")]),t._v(" å¯¹è±¡ç›´æ¥æ§åˆ¶å‘é€çš„å“åº”ã€‚")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("http-exception.filter.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ExceptionFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Catch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ArgumentsHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HttpException "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/common'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Response "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HttpException"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpExceptionFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExceptionFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exception"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" HttpException"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ArgumentsHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("switchToHttp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getResponse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Response"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getRequest"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Request"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    response\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        statusCode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        timestamp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toISOString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),a("p",[t._v("æ‰€æœ‰å¼‚å¸¸è¿‡æ»¤å™¨éƒ½åº”å®ç°é€šç”¨çš„ "),a("code",[t._v("ExceptionFilter <T>")]),t._v(" æ¥å£ã€‚å®ƒéœ€è¦ä½ ä½¿ç”¨æœ‰æ•ˆç­¾åæä¾› "),a("code",[t._v("catch(exception: T, host: ArgumentsHost)")]),t._v(" æ–¹æ³•ã€‚"),a("code",[t._v("T")]),t._v(" è¡¨ç¤ºå¼‚å¸¸ç±»å‹ã€‚")])]),t._v(" "),a("p",[a("code",[t._v("@Catch(HttpException)")]),t._v(" è£…é¥°å™¨å°†æ‰€éœ€çš„å…ƒæ•°æ®ç»‘å®šåˆ°å¼‚å¸¸è¿‡æ»¤å™¨ï¼Œå‘Šè¯‰ "),a("code",[t._v("Nest")]),t._v(" è¿™ä¸ªç‰¹å®šçš„è¿‡æ»¤å™¨æ­£åœ¨å¯»æ‰¾ "),a("code",[t._v("HttpException")]),t._v(" ç±»å‹çš„å¼‚å¸¸ï¼Œä»…æ­¤è€Œå·²ã€‚"),a("code",[t._v("@Catch()")]),t._v(" è£…é¥°å™¨å¯ä»¥ä½¿ç”¨å•ä¸ªå‚æ•°ï¼Œæˆ–ä»¥é€—å·åˆ†éš”çš„åˆ—è¡¨ã€‚è¿™ä½¿æ‚¨å¯ä»¥åŒæ—¶ä¸ºå‡ ç§ç±»å‹çš„å¼‚å¸¸è®¾ç½®è¿‡æ»¤å™¨ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å‚æ•°ä¸»æœº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚æ•°ä¸»æœº"}},[t._v("#")]),t._v(" å‚æ•°ä¸»æœº")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ "),a("code",[t._v("catch()")]),t._v(" æ–¹æ³•çš„å‚æ•°ï¼Œ"),a("code",[t._v("exception")]),t._v(" å‚æ•°æ˜¯å½“å‰æ­£åœ¨å¤„ç†çš„å¼‚å¸¸å¯¹è±¡ï¼Œ"),a("code",[t._v("host")]),t._v(" å‚æ•°æ˜¯ "),a("code",[t._v("ArgumentsHost")]),t._v(" å¯¹è±¡ã€‚ArgumentsHostæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å®ç”¨ç¨‹åºå¯¹è±¡ï¼Œæˆ‘ä»¬å°†åœ¨ "),a("a",{attrs:{href:"https://docs.nestjs.com/fundamentals/execution-context",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ‰§è¡Œä¸Šä¸‹æ–‡ç« èŠ‚"),a("OutboundLink")],1),t._v(" ä¸­è¿›ä¸€æ­¥è¿›è¡Œç ”ç©¶ã€‚åœ¨æ¬¡ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒæ¥è·å–å¯¹ "),a("code",[t._v("Request")]),t._v(" å’Œ "),a("code",[t._v("Response")]),t._v(" å¯¹è±¡çš„å¼•ç”¨(åœ¨å¼‚å¸¸å‘ç”Ÿçš„æ§åˆ¶å™¨ä¸­)ã€‚æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ "),a("code",[t._v("ArgumentsHost")]),t._v(" ä¸Šä½¿ç”¨äº†ä¸€äº›è¾…åŠ©æ–¹æ³•æ¥è·å–æ‰€éœ€çš„ "),a("code",[t._v("Request")]),t._v(" å’Œ "),a("code",[t._v("Response")]),t._v(" å¯¹è±¡ã€‚æ›´å¤šå…³äº "),a("code",[t._v("ArgumentsHost")]),t._v(" çš„ä»‹ç»è¯·çœ‹ "),a("a",{attrs:{href:"https://docs.nestjs.com/fundamentals/execution-context",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“š"),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("p",[t._v("è¾¾åˆ°æ­¤æŠ½è±¡çº§åˆ«çš„åŸå› æ˜¯ "),a("code",[t._v("ArgumentsHost")]),t._v(" åœ¨æ‰€æœ‰ä¸Šä¸‹æ–‡ (ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„ "),a("code",[t._v("HTTP")]),t._v(" æœåŠ¡å™¨ä¸Šä¸‹æ–‡ï¼Œä»¥åŠå¾®æœåŠ¡å’Œ "),a("code",[t._v("WebSocket")]),t._v(") ä¸­å‡èµ·ä½œç”¨ã€‚åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åˆ©ç”¨ "),a("code",[t._v("ArgumentsHost")]),t._v(" åŠå…¶å¸®åŠ©å‡½æ•°çš„å¼ºå¤§åŠŸèƒ½æ¥æ‰§è¡Œä»»ä½•ä¸Šä¸‹æ–‡ã€‚è¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿç¼–å†™å¯åœ¨æ‰€æœ‰ä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„é€šç”¨å¼‚å¸¸è¿‡æ»¤å™¨ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ç»‘å®šè¿‡æ»¤å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»‘å®šè¿‡æ»¤å™¨"}},[t._v("#")]),t._v(" ç»‘å®šè¿‡æ»¤å™¨")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å°†æ–°çš„ "),a("code",[t._v("HttpExceptionFilter")]),t._v(" ç»‘å®šåˆ° "),a("code",[t._v("CatsController")]),t._v(" çš„ "),a("code",[t._v("create()")]),t._v(" æ–¹æ³•ä¸Šã€‚")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("cats.controller.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[t._v("@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseFilters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpExceptionFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" createCatDto"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" CreateCatDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ForbiddenException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),a("p",[a("code",[t._v("@UseFilters()")]),t._v(" è£…é¥°å™¨ä» "),a("code",[t._v("@nestjs/common")]),t._v(" åŒ…å¯¼å…¥ã€‚")])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨äº† "),a("code",[t._v("@UseFilters()")]),t._v(" è£…é¥°å™¨ã€‚ä¸ "),a("code",[t._v("@Catch()")]),t._v(" è£…é¥°å™¨ç±»ä¼¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä¸€ä¸ªè¿‡æ»¤å™¨å®ä¾‹ï¼Œæˆ–ä»¥é€—å·åˆ†éš”çš„è¿‡æ»¤å™¨å®ä¾‹åˆ—è¡¨ã€‚è¿™é‡Œæˆ‘ä»¬å°±åœ°åˆ›å»ºäº†"),a("code",[t._v("HttpExceptionFilter")]),t._v(" çš„å®ä¾‹ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä¼ é€’ç±»(è€Œä¸æ˜¯å®ä¾‹)ï¼Œå°†å®ä¾‹åŒ–è´£ä»»ç•™ç»™æ¡†æ¶ã€‚å¹¶å¯ç”¨ä¾èµ–é¡¹æ³¨å…¥ã€‚")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("cats.controller.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[t._v("@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseFilters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HttpExceptionFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" createCatDto"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" CreateCatDto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ForbiddenException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),a("p",[t._v("å°½å¯èƒ½ä½¿ç”¨ç±»è€Œä¸æ˜¯å®ä¾‹æ¥åº”ç”¨è¿‡æ»¤å™¨ï¼Œç”±äº "),a("code",[t._v("Nest")]),t._v(" å¯ä»¥è½»æ¾åœ¨æ•´ä¸ªæ¨¡å—ä¸­é‡å¤ä½¿ç”¨åŒä¸€ç±»çš„å®ä¾‹ï¼Œå› æ­¤å¯ä»¥å‡å°‘å†…å­˜ä½¿ç”¨ã€‚")])]),t._v(" "),a("p",[t._v("åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œ"),a("code",[t._v("HttpExceptionFilter")]),t._v(" ä»…åº”ç”¨äºå•ä¸ª "),a("code",[t._v("create()")]),t._v(" è·¯ç”±å¤„ç†ç¨‹åºï¼Œä½¿å…¶æˆä¸ºæ–¹æ³•èŒƒå›´ã€‚å¼‚å¸¸è¿‡æ»¤å™¨çš„ä½œç”¨èŒƒå›´å¯ä»¥ä¸åŒï¼Œæ–¹æ³•èŒƒå›´ï¼Œæ§åˆ¶å™¨èŒƒå›´æˆ–å…¨å±€èŒƒå›´ã€‚ ä¾‹å¦‚ï¼Œè¦å°†è¿‡æ»¤å™¨è®¾ç½®ä¸ºæ§åˆ¶å™¨ä½œç”¨åŸŸï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("cats.controller.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[t._v("@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseFilters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpExceptionFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CatsController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æ­¤æ„é€ ä¸º "),a("code",[t._v("CatsController")]),t._v(" å†…éƒ¨å®šä¹‰çš„æ¯ä¸ªè·¯ç”±å¤„ç†ç¨‹åºè®¾ç½® "),a("code",[t._v("HttpExceptionFilter")]),t._v("ã€‚\nè¦åˆ›å»ºå…¨å±€èŒƒå›´çš„è¿‡æ»¤å™¨ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("main.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bootstrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" NestFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AppModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useGlobalFilters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpExceptionFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bootstrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),a("p",[a("code",[t._v("useGlobalFilters()")]),t._v(" æ–¹æ³•ä¸ä¼šä¸ºç½‘å…³æˆ–æ··åˆåº”ç”¨ç¨‹åºè®¾ç½®è¿‡æ»¤å™¨ã€‚")])]),t._v(" "),a("p",[t._v("å¯¹äºæ¯ä¸ªæ§åˆ¶å™¨å’Œæ¯ä¸ªè·¯ç”±å¤„ç†ç¨‹åºï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºéƒ½ä½¿ç”¨å…¨å±€èŒƒå›´çš„è¿‡æ»¤å™¨ã€‚åœ¨ä¾èµ–æ³¨å…¥æ–¹é¢ï¼Œä»ä»»ä½•æ¨¡å—å¤–éƒ¨æ³¨å†Œçš„å…¨å±€è¿‡æ»¤å™¨(å¦‚ä¸Šä¾‹ä¸­ä½¿ç”¨ "),a("code",[t._v("useGlobalFilters()")]),t._v(" )éƒ½ä¸èƒ½æ³¨å…¥ä¾èµ–é¡¹ï¼Œå› ä¸ºå®ƒä»¬ä¸å±äºä»»ä½•æ¨¡å—ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç»“æ„ç›´æ¥ä»ä»»ä½•æ¨¡å—æ³¨å†Œå…¨å±€èŒƒå›´çš„è¿‡æ»¤å™¨ï¼š")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("app.module.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Module "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/common'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("APP_FILTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  providers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      provide"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("APP_FILTER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      useClass"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" HttpExceptionFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppModule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),a("p",[t._v("ä½¿ç”¨æ­¤æ–¹æ³•å¯¹è¿‡æ»¤å™¨æ‰§è¡Œä¾èµ–é¡¹æ³¨å…¥æ—¶ï¼Œè¯·æ³¨æ„ï¼Œæ— è®ºé‡‡ç”¨å“ªç§ç»“æ„çš„æ¨¡å—ï¼Œè¿‡æ»¤å™¨å®é™…ä¸Šéƒ½æ˜¯å…¨å±€çš„ã€‚åº”è¯¥åœ¨å“ªé‡Œåšï¼Ÿé€‰æ‹©å®šä¹‰äº†è¿‡æ»¤å™¨(ä»¥ä¸Šç¤ºä¾‹ä¸­ä¸º "),a("code",[t._v("HttpExceptionFilter")]),t._v(" )çš„æ¨¡å—ã€‚å¦å¤–ï¼Œ"),a("code",[t._v("useClass")]),t._v(" ä¸æ˜¯å¤„ç†è‡ªå®šä¹‰ æä¾›ç¨‹åº æ³¨å†Œçš„å”¯ä¸€æ–¹æ³•ã€‚"),a("a",{attrs:{href:"https://docs.nestjs.com/fundamentals/custom-providers",target:"_blank",rel:"noopener noreferrer"}},[t._v("äº†è§£æ›´å¤š"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨æ­¤æŠ€æœ¯æ·»åŠ ä»»æ„æ•°é‡çš„è¿‡æ»¤å™¨ï¼Œåªéœ€å°†æ¯ä¸ªè¿‡æ»¤å™¨æ·»åŠ åˆ° "),a("code",[t._v("provider")]),t._v(" æ•°ç»„å³å¯ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å¼‚å¸¸æ•è·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚å¸¸æ•è·"}},[t._v("#")]),t._v(" å¼‚å¸¸æ•è·")]),t._v(" "),a("p",[t._v("ä¸ºäº†æ•è·æ‰€æœ‰æœªå¤„ç†çš„å¼‚å¸¸(æ— è®ºå¼‚å¸¸ç±»å‹å¦‚ä½•)ï¼Œå°† "),a("code",[t._v("@Catch()")]),t._v(" è£…é¥°å™¨çš„å‚æ•°åˆ—è¡¨ä¿ç•™ä¸ºç©ºï¼Œä¾‹å¦‚ "),a("code",[t._v("@Catch()")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ExceptionFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Catch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ArgumentsHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  HttpException"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  HttpStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/common'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AllExceptionsFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExceptionFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exception"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("unknown")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ArgumentsHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("switchToHttp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n      exception "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpException")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" HttpStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INTERNAL_SERVER_ERROR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      statusCode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      timestamp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toISOString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œè¿‡æ»¤å™¨å°†æ•è·å¼•å‘çš„æ¯ä¸ªå¼‚å¸¸ï¼Œæ— è®ºå…¶ç±»å‹(ç±»)å¦‚ä½•ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ç»§æ‰¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»§æ‰¿"}},[t._v("#")]),t._v(" ç»§æ‰¿")]),t._v(" "),a("p",[t._v("é€šå¸¸ï¼Œæ‚¨å°†åˆ›å»ºå®Œå…¨å®šåˆ¶çš„å¼‚å¸¸è¿‡æ»¤å™¨ï¼Œä»¥æ»¡è¶³æ‚¨çš„åº”ç”¨ç¨‹åºéœ€æ±‚ã€‚å¦‚æœæ‚¨å¸Œæœ›é‡ç”¨å·²ç»å®ç°çš„æ ¸å¿ƒå¼‚å¸¸è¿‡æ»¤å™¨ï¼Œå¹¶åŸºäºæŸäº›å› ç´ é‡å†™è¡Œä¸ºï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚")]),t._v(" "),a("p",[t._v("ä¸ºäº†å°†å¼‚å¸¸å¤„ç†å§”æ‰˜ç»™åŸºæœ¬è¿‡æ»¤å™¨ï¼Œæ‚¨éœ€è¦æ‰©å±• "),a("code",[t._v("BaseExceptionFilter")]),t._v(" å¹¶è°ƒç”¨ç»§æ‰¿çš„ "),a("code",[t._v("catch()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å®˜æ–¹ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("all-exceptions.filter.ts\n")])])])]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Catch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ArgumentsHost "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/common'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" BaseExceptionFilter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AllExceptionsFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseExceptionFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exception"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("unknown")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ArgumentsHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),a("p",[t._v("æ‰©å±• "),a("code",[t._v("BaseExceptionFilter")]),t._v(" çš„æ–¹æ³•èŒƒå›´å’Œæ§åˆ¶å™¨èŒƒå›´çš„ç­›é€‰å™¨ä¸åº”ä½¿ç”¨ "),a("code",[t._v("new")]),t._v(" å®ä¾‹åŒ–ã€‚ç›¸åï¼Œå› è¯¥è®©æ¡†æ¶è‡ªåŠ¨å®ä¾‹åŒ–å®ƒä»¬ã€‚")])]),t._v(" "),a("p",[t._v("ä¸Šé¢çš„å®ç°åªæ˜¯ä¸€ä¸ªå±•ç¤ºæ–¹æ³•çš„æ¼”ç¤ºï¼Œå¯¹æ‰©å±•å¼‚å¸¸è¿‡æ»¤å™¨çš„å®ç°ï¼ŒåŒ…æ‹¬é‡èº«å®šåˆ¶çš„ä¸šåŠ¡é€»è¾‘(ä¾‹å¦‚ï¼Œå„ç§å¤„ç†æ¡ä»¶)ã€‚")]),t._v(" "),a("p",[t._v("å…¨å±€è¿‡æ»¤å™¨å¯ä»¥æ‰©å±•åŸºæœ¬è¿‡æ»¤å™¨ã€‚ è¿™å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä¹‹ä¸€æ¥å®Œæˆã€‚")]),t._v(" "),a("p",[t._v("ç¬¬ä¸€ç§æ–¹æ³•æ˜¯åœ¨å®ä¾‹åŒ–è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨æ—¶æ³¨å…¥ "),a("code",[t._v("HttpServer")]),t._v(" ï¼Œå‚è€ƒç¤ºä¾‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bootstrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" NestFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AppModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" httpAdapter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HttpAdapterHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useGlobalFilters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AllExceptionsFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("httpAdapter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bootstrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨ "),a("code",[t._v("APP_FILTER")]),t._v(" ä»¤ç‰Œï¼Œ"),a("a",{attrs:{href:"https://docs.nestjs.com/exception-filters#binding-filters",target:"_blank",rel:"noopener noreferrer"}},[t._v("æŸ¥çœ‹è¯¦æƒ…"),a("OutboundLink")],1),t._v("ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);